호이스팅

호이스팅이란 변수나 함수의 선언부가 스코프 최상단으로 끌어올려진 것처럼 동작하여, 해당 변수나 함수의 선언 코드가 실행되기 전이라도 해당 변수를 참조할 수 있는 자바스크립트의 특징을 말한다.

# 변수의 호이스팅
우선 변수의 호이스팅에 대해서 논의하기 전에 변수 선언은 **선언**,**초기화**,**할당** 3가지 단계로 구분할 수 있다.

```javascript
var name = "jung";
```
자바스크립트의 변수는 선언 -> 초기화 -> 할당 3단계로 이루어 진다.

1. 변수의 선언
- 우선 변수의 선언 과정에서 해당 변수가 사용할 메모리 공간을 확보한다.
2. 변수의 초기화
- 확보된 메모리 공간에는 이전에 해당 메모리에 쓰였던 값이 아직 저장되어 있을 수 있다. 이를 **쓰레기 값** 이라고 하는데 이 값을 지워주기 위해 **undefined**로 초기화해주는 과정을 거친다.
3. 변수의 할당 
- 이제 확보한 변수의 메모리에 값을 저장한다.

자바스크립트는 변수의 선언과 초기화를 코드 실행 시점인 런타임이 아니라, 코드 실행 전 코드 평가 시점에 먼저 처리를 하고, 변수의 할당은 코드 실행 시점에 진행한다. (var 키워드 기준)

```js
// 변수 선언과 초기화는 코드 실행 이전에 이미 실행된다.

console.log(name); // log : undefined
// 호이스팅에 의해서 변수를 참조할 수는 있지만, 할당 이전이기 떄문에 초기화 값인 undefined가 할당되어 있다.

var name = "jung"; // 이 시점에서 변수에 값이 할당된다.

console.log(name); // log : "jung";
```


## let과 const의 호이스팅
var은 그렇다 치고 let과 const는 변수 선언 이전에 참조할 수 없다. 그렇다면 let과 const는 호이스팅이 발생하지 않는 것일까?

아니다. let과 const도 호이스팅이 발생한다. var과의 차이점은 변수 초기화 단계의 시점이다.

### 선언과 초기화가 함께
var은 변수의 선언 시점에 변수의 초기화도 같이 진행된다.
그래서 실제 변수 선언문 이전에서 변수를 참조할 수 있지만, undefined 값을 참조하게 된다.

### 초기화와 할당이 함께
let과 const는 값 할당 단계에서 변수의 초기화가 진행된다.
이들도 var처럼 런타임 이전에 변수의 선언이 이뤄지지만, 변수의 초기화는 변수 할당 시점에 진행되기 때문에 

실제 선언문 이전에서 해당 변수를 참조할 수 없다.

이렇게 변수의 선언은 이뤄졌지만 변수의 초기화가 이루어지지 않아서 실제 선언부 이전에 호출 시 참조 에러가 발생하는 현상을 **TDZ : 일시적 사각 지대** 라고 한다.




# 함수의 호이스팅
함수는 함수가 선언되는 방식에 따라 호이스팅의 차이가 있다.

## 함수 선언문
우선 함수 선언문으로 함수를 정의하는 경우는 런타임 이전에 함수의 정의가 평가되어 함수 객체를 생성한다.

그래서 함수 선언문으로 정의된 함수는 실제 함수 선언문 이전에 호출할 수 있다. 이를 **함수 호이스팅** 이라고 한다.

```js
console.log(add(2, 3)); // 5  : 함수 호이스팅에 의해서 실제 함수 선언문 이전에 함수를 호출할 수 있다.

function add(a, b) {
  return a + b;
}
```

## 함수 표현식
함수 표현식으로 함수를 정의한 경우는 조금 다르다. 함수 표현식의 경우 **함수 호이스팅**이 아니라 **변수 호이스팅**을 따른다. 

위에서 설명했듯 변수의 호이스팅은 실제 변수 선언문에 와서야 값의 할당이 이뤄지고, 이 때 값의 평가도 이뤄진다.

실제 함수 표현식 코드에서 함수가 평가되어 함수 객체를 생성하기 때문에 함수 표현식은 실제 함수 표현식 이전에 호출할 수 없다.

```js
console.log(add(2, 3)); // Error : add is not a function 
// 변수 호이스팅을 따르기 떄문에 add에는 undefined가 할당되어 있고, 호출할 수 없다.

var add = function(a, b) {
  return a + b;
};
```



# 정리
- 호이스팅이란 자바스크립트의 특징으로 함수나 변수를 실제 선언문 이전에 참조할 수 있는 것을 말한다.
- var은 선언과 초기화가 런타임 이전에, let과 const는 선언만 런타임 이전.
- 함수 선언문은 함수 호이스팅이 발생하고, 함수 표현식은 변수 호이스팅이 발생한다.
