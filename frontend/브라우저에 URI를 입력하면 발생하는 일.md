# 브라우저의 동작 과정은 어떻게 될까?

브라우저가 HTML,CSS,Javascript로 된 텍스트 문서를 어떻게 파싱하고 렌더링 하는지에 대해서 알아보았다.

![image](https://github.com/dnrgus1127/TIL/assets/65962363/8c060551-bd2e-47d9-a7af-74075870a9dd)

## 브라우저의 주소창에 URI을 입력하면 발생하는 일
브라우저 창에 URI를 입력하고 엔터를 누르면 브라우저는 서버에 해당 URL에 대한 요청이 전송된다.
루트 경로에 요청을 받은 서버는 암묵적으로 index.html을 응답한다. (path가 지정되어 있다면 다른 파일)

## HTML 파싱
브라우저의 렌더링 엔진은 서버로부터 응답받은 HTML 파일을 브라우저가 이해할 수 있는 자료구조인 DOM으로 변환하기 위해 파싱한다.

렌더링 엔진은 HTML을 한줄씩 파싱하며 DOM을 생성하다가 css와 연결된 link태그나 style태그, script 태그, img 태그 등을 만나면 HTML의 파싱을 일시 중단하고 서버로 해당 리소스를 요청한다.
이후 css 파일을 HTML과 동일하게 파싱 과정을 거쳐서 CSSOM을 생성하고 HTML 파싱을 이어서 진행한다. 

> DOM과 CSSOM을 브라우저가 렌더링을 하기 위해서 사용하는 자료구조인 렌터 트리리로 결합시킨다.

이렇게 만들어진 렌더트리를 이용하여 HTML 요소의 레이아웃을 계산하여 브라우저가 화면에 웹 요소를 그리게 된다.


## 자바스크립트의 파싱
렌더링 엔진의 HTML파싱 과정에서 javascript 파일이나 script 태그를 만나게 되면 CSS처럼 브라우저는 HTML 파싱을 중단하고 js를 파싱하기 위해서 자바스크립트 엔진으로 제어권을 넘긴다.
자바스크립트 엔진은 javascript를 파싱하고 실행한 후 다시 브라우저 렌더링 엔진에 제어권을 넘겨 HTML 파싱을 마저 진행한다.

> 스크립트 지연으로 인한 로딩 시간 지연과 DOM이 완성되지 않은 상태에서 javascript를 통한 DOM조작을 막기 위해서 자바스크립트는 body 태그의 가장 아래에 위치시키는 것이 바람직하다.


## 참조
- Javascript Deep Dive(도서)
